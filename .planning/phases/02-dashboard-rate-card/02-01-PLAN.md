---
phase: 02-dashboard-rate-card
plan: 01
type: execute
---

<objective>
Build the 4-tab dashboard shell and implement the Executive Summary and Cost Analysis tabs with KPI cards, Recharts visualizations, and data tables.

Purpose: Deliver the first two dashboard views showing high-level event portfolio intelligence and cost breakdown analysis.
Output: Working tabbed dashboard with Executive Summary (KPI cards, bar/area/pie charts) and Cost Analysis (distribution chart, section aggregates table, section usage chart).
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase summaries (Phase 1 foundation):
@.planning/phases/01-foundation/01-01-SUMMARY.md
@.planning/phases/01-foundation/01-02-SUMMARY.md
@.planning/phases/01-foundation/01-03-SUMMARY.md

# Key source files:
@src/pages/DashboardPage.tsx
@src/types/dashboard.ts
@src/lib/data.ts
@src/data/dashboard-executive.json
@src/data/dashboard-costs.json
@src/index.css

**Tech stack available:** Vite 7, React 19, TypeScript, Tailwind CSS v4, shadcn/ui v4 (button, card, table, tabs, input, badge, separator), Recharts, lucide-react
**Established patterns:** @/ path alias, oklch color space, shadcn/ui New York style, Layout route with Outlet, typed JSON imports via Vite, data accessor functions in src/lib/data.ts
**Constraining decisions:**
- oklch color space for all theme variables (shadcn v4 + Tailwind v4)
- Enterprise aesthetic: dark sidebar, light content, slate/zinc + blue/emerald accent
- Pre-computed JSON data in src/data/ — do NOT import raw source files
- Chart colors use CSS variables: --chart-1 through --chart-5
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build tabbed dashboard with Executive Summary tab</name>
  <files>src/pages/DashboardPage.tsx</files>
  <action>
Replace the current DashboardPage stub with a full 4-tab layout using shadcn/ui Tabs component. Tab values: "executive", "costs", "variance", "managers". Only Executive Summary content is built now — other tabs get placeholder text ("Coming soon...").

**Executive Summary tab content:**

1. **KPI row** (4 cards across top): Total Events (1,659), Total Revenue ($303.5M formatted), Avg Event Size ($183K formatted), Events with Recap (997). Use Card with compact styling — small muted label on top, large bold number below. Format currency with toLocaleString and appropriate abbreviations ($XXM for millions, $XXK for thousands).

2. **Top Clients by Revenue** — Horizontal BarChart (Recharts) showing top 10 clients. Bar color: chart-1. Format Y-axis labels as client names, X-axis as dollar amounts. Use `getExecutiveSummary().topClientsByRevenue`.

3. **Top Offices by Volume** — Horizontal BarChart showing top 15 offices by event count. Bar color: chart-2. Use `getExecutiveSummary().topOfficesByVolume`.

4. **Monthly Event Timeline** — AreaChart showing event count and revenue over time. X-axis: month labels (format "Jan '18", "Jul '20" etc). Two Y-axes: left for count, right for revenue. Area fill: chart-1 for count with 20% opacity, chart-2 for revenue with 20% opacity. Use `getExecutiveSummary().eventsByMonth`.

5. **Status Distribution** — PieChart showing Won/Lost/Cancelled/Pending. Colors: chart-1 (Won), chart-3 (Lost), chart-5 (Cancelled), chart-4 (Pending). Use `getExecutiveSummary().statusDistribution`.

6. **Revenue Segment Distribution** — PieChart showing Tier 1-5. Colors: chart-1 through chart-5. Use `getExecutiveSummary().revenueSegmentDistribution`.

Layout: KPIs across top, then 2-column grid for charts (clients left, offices right), full-width timeline, then 2-column for pie charts. Wrap each chart in a Card with CardHeader (title) and CardContent.

Use Recharts ResponsiveContainer (height={300} for bar charts, height={250} for area chart, height={250} for pies). Import from 'recharts': BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, AreaChart, Area, PieChart, Pie, Cell, ResponsiveContainer, Legend.

For chart colors, use CSS variable values directly: `var(--chart-1)` etc passed as fill/stroke props — Recharts accepts CSS custom properties in fill strings. If that doesn't work, use the oklch values from index.css as string literals.

Do NOT create separate component files for each chart — keep everything in DashboardPage.tsx for now. This is a presentation prototype, not a production app.
  </action>
  <verify>npm run build succeeds with no TypeScript errors. Dev server shows 4 tabs, Executive Summary tab displays KPI cards and all 5 charts with data.</verify>
  <done>4-tab dashboard shell renders. Executive Summary tab shows: 4 KPI cards with formatted numbers, top clients bar chart, top offices bar chart, monthly timeline area chart, status pie chart, revenue segment pie chart. All populated from pre-computed JSON data.</done>
</task>

<task type="auto">
  <name>Task 2: Build Cost Analysis tab</name>
  <files>src/pages/DashboardPage.tsx</files>
  <action>
Replace the "costs" tab placeholder with the Cost Analysis view. Use `getCostAnalysis()` data accessor.

**Cost Analysis tab content:**

1. **KPI row** (3 cards): Total Events (1,659), Events with Bid & Recap (997 — from filesBidAndRecap), Number of Cost Sections (7 — from sectionAggregates.length). Same card styling as Executive Summary KPIs.

2. **Grand Total Distribution** — BarChart showing event count by grand total range (Under $10K, $10K-$25K, etc). Vertical bars. Bar color: chart-1. Use `getCostAnalysis().grandTotalRanges`. X-axis: label, Y-axis: count.

3. **Section Usage** — Horizontal BarChart showing how many events include each cost section, from sectionSummary.sections. Bar color: chart-2. X-axis: percent of events, Y-axis: section name (truncate long names). Show percentOfEvents value.

4. **Section Cost Aggregates** — shadcn/ui Table showing all 7 sections with columns: Section Name, Total Bid ($), Total Actual ($), Avg Bid ($), Avg Actual ($), Event Count, Recap Count. Format dollar values with toLocaleString. Use `getCostAnalysis().sectionAggregates`. Add a visual indicator (colored dot or badge) for sections where avgActual > avgBid (over budget on average). Sort by totalBid descending.

5. **Revenue by Status** — PieChart showing revenue distribution across Won/Lost/Cancelled/Pending. Colors: chart-1, chart-3, chart-5, chart-4 (same as Executive Summary status chart). Use `getCostAnalysis().byStatus`.

Layout: KPIs across top, then 2-column grid (grand total distribution left, section usage right), full-width section aggregates table, then revenue by status pie centered below.

Same Recharts patterns as Task 1. Keep all code in DashboardPage.tsx. Use Tailwind `text-emerald-600` for under-budget indicators and `text-red-500` for over-budget.
  </action>
  <verify>npm run build succeeds. Dev server shows Cost Analysis tab with KPI cards, grand total distribution chart, section usage chart, section aggregates table, and revenue by status pie chart.</verify>
  <done>Cost Analysis tab shows: 3 KPI cards, grand total distribution bar chart, section usage horizontal bar chart, 7-row section aggregates table with budget indicators, revenue by status pie chart. All populated from getCostAnalysis() data.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes (or only pre-existing warnings)
- [ ] Dashboard page has 4 tabs (Executive Summary, Cost Analysis, Variance, Managers)
- [ ] Executive Summary tab: 4 KPIs + 5 charts all rendering with data
- [ ] Cost Analysis tab: 3 KPIs + 2 charts + 1 table all rendering with data
- [ ] Variance and Managers tabs show placeholder text
- [ ] No console errors in browser
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors
- Executive Summary and Cost Analysis tabs fully functional with Recharts visualizations
- Dashboard tabs switch correctly between all 4 views
  </success_criteria>

<output>
After completion, create `.planning/phases/02-dashboard-rate-card/02-01-SUMMARY.md`
</output>
